<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1"/>
		<link rel="stylesheet" href="bootstrap/bootstrap.css"/>
		<script src="js/jquery.min.js"></script>
		<script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src='js/iframes.js'></script>
    <link rel="stylesheet" href="css/media.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/shopcar.css">
  <title>Document</title>
</head>
<body onload='show()'>
  	<!--导入header.html-->
	<header>
      <div id='lg'>
          <div class='bg-light'>
          <div class='container  '>
            <!-- 最顶部登录注册 -->
            <div class='row flex-lg-nowrap bg-light justify-content-end p-2 color-footer'>
              <div class='col-lg-3 pl-5'>
                <img src="img/yonghu.png" alt="">
                <span><a href='login.html' target='_parent'>登录</a></span>
                <img src="img/zhuce.png" alt="">
                <span><a href='login.html' target='_parent'>注册</a></span>
              </div>
            </div>
          </div>
          </div>
            <!-- logo 搜索 -->
            <div class='nav-bg pt-5'>
              <div class='container'>
                <div class='row rel'>
                  <div class='col-lg-7 '>
                    <img src="img/logo.png" alt="" class='w-25'>
                  </div>
                  <div class='col-lg-5 '>
                    <input type="text" id='kwords' class=' inp  pl-3  rounded-0' placeholder="请输入您要搜索的内容">
                    <a class=' btn btn-sousuo rounded-0 abs'  href='javascript:;' onclick='find()'>搜索
                    </a>
                  </div>
                </div> 
                <div class='pt-4 pb-3' >
                  <span class='mr-5'><a href="index.html" target='_parent'>片库首页</a></span>
                   <span class='mr-5'><a href="onload.html" target='_parent'>在线剧集</a></span>
                  <span class='mr-5'><a href="vip.html" target='_parent'>会员套餐</a></span>
                  <span class='mr-5'><a href="#">关于我们</a></span>
                </div>
              </div>
            </div>
        </div>
      </div>
      <!-- 大屏消失时 -->
      <div class='dis' id="di">
          <div class="container  ">
              <ul class="nav nav-justified  ">
                  <li class="nav-item">
                    <a href="index.html" target='_parent' class="nav-link">片库首页</a>
                  </li>
                  <li class="nav-item">
                    <a href="onload.html" target='_parent' class="nav-link">在线剧集</a>
                  </li>
                  <li class="nav-item">
                    <a href="vip.html" target='_parent' class="nav-link">会员套餐</a>
                  </li>
                  <li class="nav-item">
                    <a href="javascript:;"  class="nav-link">关于我们</a>
                  </li>
              </ul>
          </div>
      </div>
      <!-- 小屏 和中屏  -->
      <div id='sm'>
        <div class='container-fluid p-0'>
          <div class='bg-light text-c pt-3 pb-3  d-flex
          justify-content-around'>
              <div id="mySidenav" class="sidenav">
                  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                  <a href="#">片库首页</a>
                  <a href="#####" onclick='open()'>在线剧集</a>
                  <ul id="myUl" >
                    <li><a href="#">银牌会员</a></li>
                    <li><a href="#">金牌会员</a></li>
                    <li><a href="#">钻石会员</a></li>
                  </ul>
                  <a href="#">会员套餐</a>
                  <a href="#">关于我们</a>
                </div>
                <span  onclick="openNav()">&#9776; </span>
                <div class='header-logo'>
                  <img src="img/logo.png" alt="" class=>	
                </div>
                <div class='he'>
                  <a href='#'><img src="img/yonghu.png" alt=""></a>
                  <a href='#'><img src="img/sousuo.png" alt=""></a>
                  <a href='vshopcar.html?vid=1'><img src="img/gouwuche.png" alt=""></a>
                </div>
              </div>
        </div>
      </div>
  <div class='container '>
    <div id='title' class='mt-5'>
    </div>
    <div class='row mt-4'>
      <div class='col-lg-8 col-sm-12   '>
        <div id='vipcar'>
        </div>
      </div>
      <div class='col-lg-4 col-sm-12 border-left pt-4'>
          <!-- 动态生成的购物车 -->
          <div id='data'>
             <p class='border-bottom-4'>购物车总计</p>
          </div>
      </div>
    </div>
  </div>
  <!-- 引入footer -->
  <div id="leamain">
      <footer class="mt-5">
        <iframe  class="my_footer" src="footer.html" marginheight="0" marginwidth="0" frameborder="0" scrolling="no" width="100%" height=100% id="hIframeb" onload='bbb()' ></iframe>
      </footer>
  </div>
   <!-- 侧边栏 -->
   <div class='container'>
      <div id='side' >
        <ul class='list-unstyled'>
          <li class='p-2'><a href=""><img src="img/icon-service.png" alt=""></a></li>
          <li class='p-2'><a href=""><img src="img/qq.png" alt=""></a></li>
          <li class='p-2'><a href=""><img src="img/weixin.png" alt=""></a></li>
          <li class='p-2'><a href=""><img src="img/ziyuan.png" alt=""></a></li>
        </ul>
      </div>
    </div>
  <script>
    //获取页面传递的参数
    var url=new URLSearchParams(location.search);
    var vid=url.get('vid')
    vid.value=vid
    vid=parseFloat(vid)
    console.log(vid)
    // 从数据读取内容
    function show(){
			var xhr=new XMLHttpRequest();
			xhr.onreadystatechange=function(){
				if(xhr.readyState==4 && xhr.status==200){
					var result=xhr.responseText;
					var arr=JSON.parse(result);
              if(vid==1){
                title.innerHTML=`<p>${arr[0].allkind}'</p>
                <button class='btn'>
                <a href='vip.html'>继续浏览</a></button>`
                vipcar.innerHTML+=`
                <table class='w-100 text-c' id='datahh'>
                  <thead>
                    <tr>
                      <th colspan="3" style='text-align:left'>商品</th>
                      <th>价格</th>
                      <th>数量</th>
                      <th>合计</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><img src="img/chahao.png" alt=""></td>
                      <td><img src='${arr[0].vsrc}'></td>
                      <td>${arr[0].vkind}</td>
                      <td>${arr[0].vprice}</td>
                      <td>
                        <input type='button' value='-' onclick='funjian()'>
                        <input type='text' value='${n}' readonly='readonly' id='dddd'>
                        <input type='button' value='+' onclick='funjia()'>
                      </td>
                      <td>${arr[0].vprice.slice(0,7)}</td>
                    </tr>
                  </tbdoy>
                </table>
                `
                data.innerHTML+=`<table class='w-100'>
                  <tbody>
                    <tr class='border-bottom-4 '>
                      <td class='car-amount my-small pt-2 pb-2'>购物车小计</td>
                      <td class='car-aright' id='price1'>${arr[0].vprice.slice(0,7)}</td>
                    </tr>
                    <tr class='border-bottom-4'>
                      <td class='car-amount my-small'>订单总计</td>
                      <td class='car-aright' id='price2'>${arr[0].vprice}</td>                    
                    </tr>
                    <tr>
                        <td colspan="2"><button>前往收银台</button></td>
                    </tr>
                  </tbody>
                </table>`
              }else if(vid==2){
                title.innerHTML=`<p>'${arr[1].allkind}'</p>
                <button class='btn'>
                <a href='vip.html'>继续浏览</a></button>`
                vipcar.innerHTML+=`<table class='w-100 text-c' id='datahh'>
                  <thead>
                    <tr>
                      <th colspan="3" style='text-align:left'>商品</th>
                      <th>价格</th>
                      <th>数量</th>
                      <th>合计</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><img src="img/chahao.png" alt=""></td>
                      <td><img src='${arr[1].vsrc}'></td>
                      <td>${arr[1].vkind}</td>
                      <td>${arr[1].vprice}</td>
                      <td>
                        <input type='button' value='-' onclick='funjian()'>
                        <input type='text' value='${n}' readonly='readonly' id='dddd'>
                        <input type='button' value='+' onclick='funjia()'>
                      </td>
                      <td>${arr[1].vprice.slice(0,7)}</td>
                    </tr>
                  </tbdoy>
                </table>`
                data.innerHTML+=`<table class='w-100'>
                  <tbody>
                    <tr class='border-bottom-4 '>
                      <td class='car-amount my-small pt-2 pb-2'>购物车小计</td>
                      <td class='car-aright' id='price1'>${arr[1].vprice.slice(0,7)}</td>
                    </tr>
                    <tr class='border-bottom-4'>
                      <td class='car-amount my-small'>订单总计</td>
                      <td class='car-aright' id='price2'>${arr[1].vprice}</td>                    
                    </tr>
                    <tr>
                        <td colspan="2"><button>前往收银台</button></td>
                    </tr>
                  </tbody>
                </table>`
              }else if(vid==3){  
                title.innerHTML=`<p>${arr[2].allkind}</p>
                <button class='btn'>
                <a href='vip.html'>继续浏览</a></button>`
                vipcar.innerHTML+=`<table class='w-100 text-c' id='datahh'>
                  <thead>
                    <tr>
                      <th colspan="3" style='text-align:left'>商品</th>
                      <th>价格</th>
                      <th>数量</th>
                      <th>合计</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><img src="img/chahao.png" alt=""></td>
                      <td><img src='${arr[2].vsrc}'></td>
                      <td>${arr[2].vkind}</td>
                      <td>${arr[2].vprice}</td>
                      <td>
                        <input type='button' value='-' onclick='funjian()'>
                        <input type='text' value='${n}' readonly='readonly' id='dddd'>
                        <input type='button' value='+' onclick='funjia()'>
                      </td>
                      <td>${arr[2].vprice.slice(0,7)}</td>
                    </tr>
                  </tbdoy>
                </table>`
                data.innerHTML+=`
                <table class='w-100'>
                  <tbody>
                    <tr class='border-bottom-4 '>
                      <td class='car-amount my-small pt-2 pb-2'>购物车小计</td>
                      <td class='car-aright' id='price1'>${arr[2].vprice.slice(0,7)}</td>
                    </tr>
                    <tr class='border-bottom-4'>
                      <td class='car-amount my-small'>订单总计</td>
                      <td class='car-aright' id='price2'>${arr[2].vprice}</td>                    
                    </tr>
                    <tr>
                        <td colspan="2"><button>前往收银台</button></td>
                    </tr>
                  </tbody>
                </table>`
              }  
         }
        }
			var url='/lo/vip';
			xhr.open('get',url,true);
			xhr.send(null);
		}	
  </script>

  <script>
      window.onresize=function(){
        aaa()
      }
      function bbb(){
        var a=window.frames[1].window.document.body.scrollHeight-2;
        hIframeb.style.height=a+'px'
      }
  </script>
  <script>
  //js修改购物车信息
  var n=1
  function funjian(){
    if(n>1){
      n--
      dddd.value=n
    }else{
      n=0
    }
    price();
  }
  function funjia(){
    n++
    dddd.value=n;
    price()
  }
  function price(){
    if(vid==1){
      var a=100
      price1.innerHTML=`¥${(a*n).toFixed(2)}` 
      price2.innerHTML=`¥${(a*n).toFixed(2)}`     
    }else if(vid==2){
      var a=150
      price1.innerHTML=`¥${(a*n).toFixed(2)}`
      price2.innerHTML=`¥${(a*n).toFixed(2)}`
    }else{
      var a=180
      price1.innerHTML=`¥${(a*n).toFixed(2)}`
      price2.innerHTML=`¥${(a*n).toFixed(2)}`
    }
  }
  </script>
</body>
</html>